<!-- All our projects begin with the project tag -->
<project name="Space Trader" default="all" basedir=".">
	<!-- our init target is a prereq for everything -->
	<target name="init">
		<property name = "src.dir" value = "src" />
		<property name = "build.dir" value = "build" />
		<property name = "apidoc.dir" value = "apidoc" />
		<property name = "user.name" value = "Glenn Hollingsworth" />
	</target>
	
	<!-- prepare is a prereq for most tasks except cleanup -->
	<target name="prepare" depends="init">
		<mkdir dir = "${build.dir}" />
		<mkdir dir = "${apidoc.dir}" />
	</target>
	
	<!-- compile the code -->
	<target name="compile" depends="prepare">
		<javac srcdir="${src.dir}" destdir="${build.dir}" classpath="lib/resources.jar" includeantruntime="false" />
	</target>
	
	<!-- create the javadoc -->
	<target name="javadoc" depends="compile">
		<javadoc destdir="${apidoc.dir}" author="true" version="true">
			<classpath>
		        <fileset dir="lib">
            		<include name="resources.jar"/>
	        	</fileset>
			</classpath>
			<packageset dir="${src.dir}" defaultexcludes="yes">
			</packageset>
		</javadoc>
	</target>

	<!-- create the jar -->
	<target name="jar" depends="javadoc">
		<jar destfile="AntTestRun.jar" basedir="${build.dir}">
		    <manifest>
				<attribute name="Main-Class" value="edu.gatech.oad.antlab.pkg1.AntLabMain"/>
		        <attribute name="Class-Path" value="lib/resources.jar"/>
		    </manifest>
		  </jar>
	</target>
	
	<!-- run the application -->
	<target name="run" depends="jar">
		<java jar="AntTestRun.jar" fork="true">
	         <arg value="-g"/>
			 <arg value="test.arg" />
			 <classpath>
			 	<pathelement path="${java.class.path}" />
	            <pathelement location="${build.dir}" />
		     </classpath>
       </java>
	</target>
	
	<!-- clean up all files generated by tshe build -->
	<target name="clean" depends="init">
		<delete dir="${build.dir}"/>
		<delete dir="${apidoc.dir}"/>
		<delete file="AntTestRun.jar"/>
	</target>
	
	<!-- run all tasks except cleanup -->
	<target name="all" depends="run">
	
	</target>

</project>